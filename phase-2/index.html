<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Algebra – clean start</title>
  <style>
    body{margin:0;font:16px system-ui,-apple-system,Segoe UI,Roboto,Helvetica}
    header{background:#0b5fff;color:#fff;padding:12px 16px}
    main{padding:16px;max-width:800px;margin:auto}
    .card{border:1px solid #ddd;border-radius:12px;padding:12px;margin:12px 0}
    button,select{padding:10px 12px;border:1px solid #bbb;border-radius:10px;background:#fff;cursor:pointer}
    .muted{color:#606770}
  </style>
</head>
<body>
  <header><h1>Algebra – clean start</h1></header>
  <main>
    <div class="card"><b id="status">Checking...</b></div>

    <div class="card">
      <h3>Lessons</h3>
      <select id="module"></select>
      <select id="lesson"></select>
      <button id="start">Start Lesson</button>
      <div id="out" class="muted" style="margin-top:8px"></div>
    </div>
  </main>

  <script>
    'use strict';
    const $ = s => document.querySelector(s);
    $('#status').textContent = '✅ JS is running';

    const LESSONS = {
      "0": { title: "Pre-Algebra Essentials", items: [
        { id: "0.1", title: "PEMDAS", bank: [
          { prompt: "Compute: 8 + 2 * 5", type: "numeric", answer: "18" },
          { prompt: "Compute: (8 + 2) * 5", type: "numeric", answer: "50" }
        ]},
        { id: "0.2", title: "Integers", bank: [
          { prompt: "What is | -12 | ?", type: "numeric", answer: "12" }
        ]}
      ]},
      "1": { title: "Variables & Expressions", items: [
        { id: "1.1", title: "Variables", bank: [
          { prompt: "If x=5, what is 2x+7?", type: "numeric", answer: "17" },
          { prompt: "Which expression means 'three more than twice n'?", type: "mcq",
            answer: "2n+3", options: ["2n+3","3n+2","n/2+3","3-2n"] }
        ]}
      ]}
    };

    const mod = $('#module'), les = $('#lesson'), out = $('#out');
    function fillSelect(el, opts){
      el.innerHTML=''; for(const o of opts){
        const op=document.createElement('option'); op.value=o.value; op.textContent=o.label; el.appendChild(op);
      }
    }
    function onModule(){
      const m = LESSONS[mod.value];
      fillSelect(les, m.items.map((L,i)=>({ value: i, label: `${L.id} – ${L.title}` })));
    }
    fillSelect(mod, Object.entries(LESSONS).map(([k,v])=>({ value:k, label:`[${k}] ${v.title}`})));
    mod.onchange = onModule; onModule();

    $('#start').onclick = () => {
      const m = LESSONS[mod.value], L = m.items[Number(les.value)];
      out.textContent = `Started: ${L.id} – ${L.title}. First prompt: ${L.bank[0].prompt}`;
    };
  </script>
</body>
</html>
